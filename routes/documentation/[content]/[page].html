<svelte:head>
  <title>{page.metadata.title}</title>
  <!-- TODO(M): Metadata tags. -->
</svelte:head>

<!-- TODO(H): Documentation page. -->
<header class="w-100 bg-purple pa3">
  <div class="f4 fw6 white">Documentation / {content}</div>
</header>

<div class="w-100 flex">
  <DocumentationContents pages={pages}></DocumentationContents>

  <div class="pa2">
    <h1 class="mv2 f2 fw6">{page.metadata.title}</h1>
    {@html page.html}
  </div>
</div>

<script>
  import DocumentationContents from "../../../components/DocumentationContents.html";

  export default {
    components: {
      DocumentationContents
    },
    async preload({ params, query }) {
      const response = await this.fetch(`documentation/${params.content}.json/${params.page || "index"}.json`);
      const json = await response.json();

      if (response.status === 200) {
        return { content: params.content, page: json.page, pages: json.pages };
      } else {
        this.error(response.status, json.message);
      }
    }
  };
</script>
