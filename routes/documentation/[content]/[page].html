<svelte:head>
  <title>{page.metadata.title}</title>
  <!-- TODO(M): Metadata tags. -->
</svelte:head>

<!-- TODO(H): Documentation page. -->
<header class="w-100 bg-purple pa3">
  <h1 class="f3 fw6 ma0">
    <a class="link white hover-yellow" href={page.href}>{page.metadata.title}</a>
  </h1>
</header>

<DocumentationContents pages={pages}></DocumentationContents>

<div class='content'>
  {@html page.html}
</div>

<style></style>

<script>
  import DocumentationContents from "../../../components/DocumentationContents.html";

  export default {
    components: {
      DocumentationContents
    },
    async preload({ params, query }) {
      const response = await this.fetch(`documentation/${params.content}.json/${params.page || "index"}.json`);
      const json = await response.json();

      if (response.status === 200) {
        return { page: json.page, pages: json.pages };
      } else {
        this.error(response.status, json.message);
      }
    }
  };
</script>
