<svelte:head>
  <title>{page.metadata.title}</title>
</svelte:head>

<h1>{page.metadata.title}</h1>

<DocumentationContents pages={pages}></DocumentationContents>

<div class='content'>
  {@html page.html}
</div>

<style></style>

<script>
  import DocumentationContents from "../../../components/DocumentationContents.html";

  export default {
    components: {
      DocumentationContents
    },
    async preload({ params, query }) {
      const response = await this.fetch(`documentation/${params.content}.json/${params.page || "index"}.json`);
      const json = await response.json();

      if (response.status === 200) {
        return { page: json.page, pages: json.pages };
      } else {
        this.error(response.status, json.message);
      }
    }
  };
</script>
